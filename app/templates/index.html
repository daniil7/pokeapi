{% extends "base.html" %}
{% block content %}

<div class="mt-2"
    x-data="{
        pokemons: [],
        async retrievePokemons() {
            this.pokemons = await (await fetch('/api/pokemon')).json();
        },
        search: '',
        doSearch() {
            return this.pokemons.filter((pokemon) => {
                return pokemon.name
                    .replace(/ /g, '')
                    .toLowerCase()
                    .includes(this.search.replace(/ /g, '').toLowerCase());
            });
        }
    }"
    x-init="retrievePokemons">

    <div class="container mx-auto">
        <input
            x-ref="searchInput"
            x-model="search"
            x-on:keydown.window.prevent.slash="$refs.searchInput.focus()"
            placeholder="Ищем покемона..."
            type="search"
            class="block w-full rounded bg-gray-200 p-4 mb-4"
        />
        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-4">
            <template x-for="pokemon in doSearch()" :key="pokemon.name">
                <div class="flex items-center shadow p-4">
                    <img class="rounded-full w-12 h-12" src="https://media.moddb.com/images/groups/1/3/2392/cat.jpg" />
                    <div class="ml-4">
                        <a x-bind:href="'/pokemon/'+pokemon.name"><span class="text-lg text-gray-900" x-text="pokemon.name"></span></a>
                    </div>
                </div>
            </template>
        </div>
    </div>
</div>

{% endblock %}
